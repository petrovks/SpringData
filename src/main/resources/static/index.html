<!DOCTYPE html>
<html  xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Products</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.0/angular.min.js"></script>
  <script src="index.js"></script>
</head>
<body ng-app="market-front">
<div class="container"  ng-controller="indexController">
  <table class="table">
    <thead>
    <tr align="center">
      <td>ID</td>
      <td>Title</td>
      <td>Category</td>
      <td></td>
      <td>Price</td>
      <td></td>
      <td></td>
      <td></td>
      <td>delete</td>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="p in productsPage.content" align="center">
      <td>{{p.id}}</td>
      <td>{{p.title}}</td>
      <td>{{p.categoryTitle}}</td>
      <td width="50px">
        <button class="btn btn-primary" ng-click="dec(p)">-</button>
      </td>
      <td width="50px" align="center">{{p.price}}</td>
      <td width="50px">
        <button class="btn btn-primary" ng-click="inc(p)">+</button>
      </td>

      <td>
        <button class="btn btn-primary" ng-click="showInfo(p)">Инфо</button>
      </td>
      <td>
        <button class="btn btn-primary" ng-click="prepareForUpdate(p.id)">Изменить</button>
      </td>
      <td>
        <button class="btn btn-primary" ng-click="delete(p)">Удалить</button>
      </td>
    </tr>
    </tbody>
  </table>
  <p></p>
  <nav aria-label="Page navigation">
    <ul class="pagination">
      <li class="page-item" ng-repeat="pageIndex in paginationArray">
        <button class="page-link" ng-click="loadProducts(pageIndex)">{{pageIndex}}</button>
      </li>
    </ul>
  </nav>
  <p></p>

  <h3>Добавить новый продукт</h3>
  <form novalidate ng-submit="createNewProduct()">
    <input class="form-control" type="text" placeholder="Название" ng-model="new_product.title">
    <p></p>
    <input class="form-control" type="number" placeholder="Цена" ng-model="new_product.price">
    <p></p>
    <input class="form-control" type="text" placeholder="Название категории" ng-model="new_product.categoryTitle">
    <p></p>
    <button type="submit" class="btn btn-primary">Создать</button>
  </form>
  <p></p>
  <h3>Изменить продукт</h3>
  <p></p>
  <form novalidate ng-submit="updateProduct()">
    <input class="form-control" type="number" hidden placeholder="Id" ng-model="update_product.id">
    <p></p>
    <input class="form-control" type="text" placeholder="Название" ng-model="update_product.title">
    <p></p>
    <input class="form-control" type="number" placeholder="Цена" ng-model="update_product.price">
    <p></p>
    <input class="form-control" type="text" placeholder="Название категории" ng-model="update_product.categoryTitle">
    <p></p>
    <button type="submit" class="btn btn-primary">Изменить</button>
  </form>
  <!--   <a th:href="@{'/'}" class="btn btn-primary">На главную страницу</a>
     <p></p>
    <a th:href="@{'/create'}" class="btn btn-primary">Добавить продукт</a>-->
</div>
</body>
</html>